# 开源参考：模拟连锁经营（选址/人流/盈亏）

本文整理适合实现“全省建设门店（建设期预算）→开业运营→盈亏平衡→盈利或关店”的开源项目/库（均在 GitHub）。

## 你要的核心机制（拆解）

1. 省内选址/扩张：从候选点里挑新店（或在网格/城市节点上落点）
2. 人流/需求：不同地块的人流量、转化率、客单价分布、竞争分流
3. 成本与建设期：CAPEX（装修/设备/押金）、建设周期、开业前后现金流
4. 盈亏平衡：固定成本 + 变动成本 → 计算 break-even（销量/客流/时间）
5. 运营策略：定价、营销、补货/设备、关店/搬迁/升级

下面的仓库主要覆盖 (1)(2)(3)(4) 中的“空间/选址/人流仿真”关键底座；财务部分通常需要你在业务层自建。

## A. 选址/覆盖/空间优化（决定“在哪开店”）

- `pysal/spopt`：空间优化库（facility location/location-allocation/覆盖类问题），可直接拿“需求点(人流/人口/订单)”+“候选店址”做选址求解。
  - https://github.com/pysal/spopt
- `cyang-kth/maximum-coverage-location`：最大覆盖选址（MCLP）Python 实现；适合“给定半径/服务范围，挑 K 家店覆盖最多需求点”。
  - https://github.com/cyang-kth/maximum-coverage-location
- `antoniomedrano/p-center`：p-center 问题（让最坏服务距离最小）；适合“省内布局让最远顾客也不太远”。
  - https://github.com/antoniomedrano/p-center
- `apulverizer/allagash`：覆盖类空间优化库（covering problems），偏工程化（示例/流程化）。
  - https://github.com/apulverizer/allagash
- `apulverizer/pyspatialopt`：空间优化建模库（覆盖模型为主），老项目但“覆盖/选址”思路直观。
  - https://github.com/apulverizer/pyspatialopt

适配点：把“人流量/需求强度”作为权重，把“服务半径/通勤时间”作为覆盖判定；求解输出即“建议开店列表/覆盖率”。

## B. 人流/客群行为仿真（决定“人怎么来、买多少”）

- `mesa/mesa`：Python 多智能体（ABM）框架。可把“顾客”作为 agent，在空间中移动/选择门店；门店按吸引力（设备、价格、服务、距离）竞争。
  - https://github.com/mesa/mesa
- `NetLogo/NetLogo`：经典 ABM 平台（可快速搭建原型），适合先验证“人流移动+门店竞争+进店概率”的机制。
  - https://github.com/NetLogo/NetLogo

适配点：把“人流量”落成 agents 流；转化率、客单价用概率分布；把关店/开店当作环境变化。

## C. 地图/路网/可达性（把“全省”落到空间上）

- `gboeing/osmnx`：从 OpenStreetMap 下载路网/POI，做可达性、最短路、服务半径、分区统计等。
  - https://github.com/gboeing/osmnx
- `networkx/networkx`：图算法库（最短路/中心性/连通性），配合路网计算到店距离/时间。
  - https://github.com/networkx/networkx
- `pysal/pysal`：空间分析库（热点、空间回归、聚类等），可用于构造“热力/竞争密度/地块价值”等特征。
  - https://github.com/pysal/pysal

适配点：用路网距离替代“直线半径”，更贴近现实；并可按行政区/城市/商圈做汇总。

## 推荐的“最小升级路线”（先少做点内容）

面向你当前的 CLI 原型，建议先做一个可跑通的“连锁版最小闭环”，不碰真实 GIS：

1. 省内抽象地图：用“城市节点/网格点”表示全省，节点上挂 `人流指数/租金/竞争度`
2. 建设期：新店状态机 `选址->建设中->开业`；建设中按天/周扣预算（CAPEX 分期）
3. 开业后：按 `人流 * 转化率 * 客单价` 出收入；成本含 `租金+人工+折旧/设备维护+变动成本`
4. 盈亏平衡：输出“本店 break-even 日销量/日客流”和“预计回本天数”，并允许关店

等机制稳定后，再选一个方向加深：

- 方向 A（偏运营）：更多 SKU/库存/设备带来的效率与客单价变化
- 方向 B（偏选址）：引入 `spopt`/MCLP/p-center 进行开店推荐
- 方向 C（偏真实地图）：引入 `osmnx + networkx` 用路网算覆盖范围/可达性
- 方向 D（偏行为）：用 `mesa` 做消费者迁移与竞品分流

## GitHub 搜索入口（继续找“完整项目/游戏源码”）

下面是直接可点的 GitHub 搜索链接（更容易命中带 UI 的经营模拟/选址模拟）：

- https://github.com/search?q=retail+simulation+game+source&type=repositories
- https://github.com/search?q=franchise+simulation+game&type=repositories
- https://github.com/search?q=store+location+allocation&type=repositories
- https://github.com/search?q=foot+traffic+simulation&type=repositories
- https://github.com/topics/facility-location

也可以用这些关键词组合：

- `facility location` / `location allocation` / `MCLP` / `p-center`
- `agent-based retail` / `customer behavior` / `foot traffic`
- `store site selection` / `trade area` / `catchment`
- `break-even` / `unit economics` / `cashflow`
